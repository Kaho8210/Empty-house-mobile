{"ast":null,"code":"import _slicedToArray from \"/Users/kahoshirai/Mantine_demo_2_23/my-mantine-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useState, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport useStyles from './MachineNumber.styles.js';\nvar MachineNumber = forwardRef(function (props, ref) {\n  var _useState = useState(props.value),\n    _useState2 = _slicedToArray(_useState, 2),\n    oldNumber = _useState2[0],\n    setOldNumber = _useState2[1];\n  var _useState3 = useState(props.value),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newNumber = _useState4[0],\n    setNewNumber = _useState4[1];\n  var _useState5 = useState(\"up\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    scrollAnimationDirection = _useState6[0],\n    setScrollAnimationDirection = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isActive = _useState8[0],\n    setIsActive = _useState8[1];\n  var prevValueRef = usePrevious(props.value);\n  var scrollByDir = function scrollByDir(dir) {\n    setIsActive(true);\n    setScrollAnimationDirection(dir);\n    setTimeout(function () {\n      setIsActive(false);\n    }, 180);\n  };\n  var scroll = function scroll() {\n    var newOriginalNumber = props.newOriginalNumber,\n      oldOriginalNumber = props.oldOriginalNumber;\n    if (newOriginalNumber == null || oldOriginalNumber == null) {\n      return;\n    }\n    if (newOriginalNumber > oldOriginalNumber) {\n      scrollByDir(\"up\");\n    } else if (newOriginalNumber < oldOriginalNumber) {\n      scrollByDir(\"down\");\n    }\n  };\n  useEffect(function () {\n    setOldNumber(prevValueRef);\n    setNewNumber(props.value);\n    scroll();\n  }, [props.value, prevValueRef]);\n  var _useStyles = useStyles(null, {\n      name: \"MachineNumber\"\n    }),\n    classes = _useStyles.classes,\n    cx = _useStyles.cx;\n  var newNumberScrollAnimationClass = useMemo(function () {\n    return isActive ? scrollAnimationDirection === \"up\" ? classes.currentNumberScrollUp : classes.currentNumberScrollDown : null;\n  }, [isActive, scrollAnimationDirection]);\n  var oldNumberScrollAnimationClass = useMemo(function () {\n    return isActive ? scrollAnimationDirection === \"up\" ? classes.oldNumberScrollUp : classes.oldNumberScrollDown : null;\n  }, [isActive, scrollAnimationDirection]);\n  return /* @__PURE__ */React.createElement(\"span\", {\n    ref: ref,\n    className: classes.baseNumber\n  }, oldNumber && /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.oldNumber, classes.currentNumberTop, oldNumberScrollAnimationClass)\n  }, oldNumber) || null, /* @__PURE__ */React.createElement(\"span\", null, /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.currentNumber, newNumberScrollAnimationClass)\n  }, newNumber)), oldNumber && /* @__PURE__ */React.createElement(\"span\", {\n    className: cx(classes.oldNumber, classes.oldNumberBottom, oldNumberScrollAnimationClass)\n  }, oldNumber) || null);\n});\nexport { MachineNumber };","map":{"version":3,"names":["MachineNumber","forwardRef","props","ref","_useState","useState","value","_useState2","_slicedToArray","oldNumber","setOldNumber","_useState3","_useState4","newNumber","setNewNumber","_useState5","_useState6","scrollAnimationDirection","setScrollAnimationDirection","_useState7","_useState8","isActive","setIsActive","prevValueRef","usePrevious","scrollByDir","dir","setTimeout","scroll","newOriginalNumber","oldOriginalNumber","useEffect","_useStyles","useStyles","name","classes","cx","newNumberScrollAnimationClass","useMemo","currentNumberScrollUp","currentNumberScrollDown","oldNumberScrollAnimationClass","oldNumberScrollUp","oldNumberScrollDown","React","createElement","className","baseNumber","currentNumberTop","currentNumber","oldNumberBottom"],"sources":["/Users/kahoshirai/Mantine_demo_2_23/my-mantine-app/node_modules/@mantine/core/src/Indicator/Machine/MachineNumber.tsx"],"sourcesContent":["import React, { useState, forwardRef, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport useStyles from './MachineNumber.styles';\n\ninterface MachineNumberProps {\n  value: number | string;\n  newOriginalNumber: number;\n  oldOriginalNumber: number;\n}\n\nexport const MachineNumber = forwardRef<HTMLDivElement, MachineNumberProps>((props, ref) => {\n  const [oldNumber, setOldNumber] = useState(props.value);\n  const [newNumber, setNewNumber] = useState(props.value);\n  const [scrollAnimationDirection, setScrollAnimationDirection] = useState<'up' | 'down'>('up');\n  const [isActive, setIsActive] = useState(false);\n  const prevValueRef = usePrevious(props.value);\n\n  const scrollByDir = (dir: 'up' | 'down') => {\n    setIsActive(true);\n    setScrollAnimationDirection(dir);\n    setTimeout(() => {\n      setIsActive(false);\n    }, 180);\n  };\n\n  const scroll = () => {\n    const { newOriginalNumber, oldOriginalNumber } = props;\n\n    if (newOriginalNumber == null || oldOriginalNumber == null) {\n      return;\n    }\n\n    if (newOriginalNumber > oldOriginalNumber) {\n      scrollByDir('up');\n    } else if (newOriginalNumber < oldOriginalNumber) {\n      scrollByDir('down');\n    }\n  };\n\n  useEffect(() => {\n    setOldNumber(prevValueRef);\n    setNewNumber(props.value);\n    scroll();\n  }, [props.value, prevValueRef]);\n\n  const { classes, cx } = useStyles(null, { name: 'MachineNumber' });\n\n  const newNumberScrollAnimationClass = useMemo(\n    () =>\n      isActive\n        ? scrollAnimationDirection === 'up'\n          ? classes.currentNumberScrollUp\n          : classes.currentNumberScrollDown\n        : null,\n    [isActive, scrollAnimationDirection]\n  );\n  const oldNumberScrollAnimationClass = useMemo(\n    () =>\n      isActive\n        ? scrollAnimationDirection === 'up'\n          ? classes.oldNumberScrollUp\n          : classes.oldNumberScrollDown\n        : null,\n    [isActive, scrollAnimationDirection]\n  );\n  return (\n    <span ref={ref} className={classes.baseNumber}>\n      {(oldNumber && (\n        <span\n          className={cx(classes.oldNumber, classes.currentNumberTop, oldNumberScrollAnimationClass)}\n        >\n          {oldNumber}\n        </span>\n      )) ||\n        null}\n      <span>\n        <span className={cx(classes.currentNumber, newNumberScrollAnimationClass)}>\n          {newNumber}\n        </span>\n      </span>\n      {(oldNumber && (\n        <span\n          className={cx(classes.oldNumber, classes.oldNumberBottom, oldNumberScrollAnimationClass)}\n        >\n          {oldNumber}\n        </span>\n      )) ||\n        null}\n    </span>\n  );\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}