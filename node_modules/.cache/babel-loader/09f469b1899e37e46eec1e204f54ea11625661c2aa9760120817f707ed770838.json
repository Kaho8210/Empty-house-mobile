{"ast":null,"code":"import _slicedToArray from \"/Users/kahoshirai/Mantine_demo_2_23/my-mantine-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useState, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport { MachineNumber } from './MachineNumber.js';\nimport useStyles from './Machine.styles.js';\nvar Machine = forwardRef(function (_ref, ref) {\n  var _ref$value = _ref.value,\n    value = _ref$value === void 0 ? 0 : _ref$value,\n    max = _ref.max;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    oldValue = _useState2[0],\n    setOldValue = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newValue = _useState4[0],\n    setNewValue = _useState4[1];\n  var prevValueRef = usePrevious(value);\n  useEffect(function () {\n    if (typeof value === \"string\") {\n      setOldValue(void 0);\n      setNewValue(void 0);\n    } else if (typeof prevValueRef === \"string\") {\n      setOldValue(void 0);\n      setNewValue(value);\n    } else {\n      setOldValue(prevValueRef);\n      setNewValue(value);\n    }\n  }, [value, prevValueRef]);\n  var numbers = useMemo(function () {\n    if (typeof value === \"string\") {\n      return [];\n    }\n    if (value < 1) {\n      return [0];\n    }\n    var result = [];\n    var currentValue = value;\n    if (typeof max === \"number\") {\n      currentValue = Math.min(max, currentValue);\n    }\n    while (currentValue >= 1) {\n      result.push(currentValue % 10);\n      currentValue /= 10;\n      currentValue = Math.floor(currentValue);\n    }\n    result.reverse();\n    return result;\n  }, [value, max]);\n  var _useStyles = useStyles(null, {\n      name: \"machine\"\n    }),\n    classes = _useStyles.classes;\n  return typeof value === \"string\" ? /* @__PURE__ */React.createElement(\"span\", {\n    ref: ref\n  }, value) : /* @__PURE__ */React.createElement(\"span\", {\n    ref: ref,\n    className: classes.base\n  }, numbers.map(function (number, i) {\n    return /* @__PURE__ */React.createElement(MachineNumber, {\n      key: numbers.length - i - 1,\n      value: number,\n      oldOriginalNumber: oldValue,\n      newOriginalNumber: newValue\n    });\n  }), typeof max === \"number\" && value > max && /* @__PURE__ */React.createElement(\"span\", null, \"+\"));\n});\nexport { Machine };","map":{"version":3,"names":["Machine","forwardRef","_ref","ref","_ref$value","value","max","_useState","useState","_useState2","_slicedToArray","oldValue","setOldValue","_useState3","_useState4","newValue","setNewValue","prevValueRef","usePrevious","useEffect","numbers","useMemo","result","currentValue","Math","min","push","floor","reverse","_useStyles","useStyles","name","classes","React","createElement","className","base","map","number","i","MachineNumber","key","length","oldOriginalNumber","newOriginalNumber"],"sources":["/Users/kahoshirai/Mantine_demo_2_23/my-mantine-app/node_modules/@mantine/core/src/Indicator/Machine/Machine.tsx"],"sourcesContent":["import React, { useState, forwardRef, useMemo, useEffect } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport { MachineNumber } from './MachineNumber';\nimport useStyles from './Machine.styles';\n\ninterface MachineNumberProps {\n  value: number | string;\n  max: number;\n}\n\nexport const Machine = forwardRef<HTMLDivElement, MachineNumberProps>(({ value = 0, max }, ref) => {\n  const [oldValue, setOldValue] = useState<number>();\n  const [newValue, setNewValue] = useState<number>();\n  const prevValueRef = usePrevious(value);\n\n  useEffect(() => {\n    if (typeof value === 'string') {\n      setOldValue(undefined);\n      setNewValue(undefined);\n    } else if (typeof prevValueRef === 'string') {\n      setOldValue(undefined);\n      setNewValue(value);\n    } else {\n      setOldValue(prevValueRef);\n      setNewValue(value);\n    }\n  }, [value, prevValueRef]);\n\n  const numbers = useMemo(() => {\n    if (typeof value === 'string') {\n      return [];\n    }\n\n    if (value < 1) {\n      return [0];\n    }\n\n    const result: number[] = [];\n    let currentValue = value;\n\n    if (typeof max === 'number') {\n      currentValue = Math.min(max, currentValue);\n    }\n\n    while (currentValue >= 1) {\n      result.push(currentValue % 10);\n      currentValue /= 10;\n      currentValue = Math.floor(currentValue);\n    }\n\n    result.reverse();\n    return result;\n  }, [value, max]);\n\n  const { classes } = useStyles(null, { name: 'machine' });\n\n  return typeof value === 'string' ? (\n    <span ref={ref}>{value}</span>\n  ) : (\n    <span ref={ref} className={classes.base}>\n      {numbers.map((number, i) => (\n        <MachineNumber\n          key={numbers.length - i - 1}\n          value={number}\n          oldOriginalNumber={oldValue}\n          newOriginalNumber={newValue}\n        />\n      ))}\n      {typeof max === 'number' && value > max && <span>+</span>}\n    </span>\n  );\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}